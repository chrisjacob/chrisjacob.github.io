import"./hoisted.02645d8b.js";const d=document.getElementById("matrix-iframe"),a=document.getElementById("matrix-loading"),w=document.getElementById("iframe-overlay"),C=document.getElementById("fullscreen-button"),L=document.getElementById("fullscreen-icon"),b=document.getElementById("exit-fullscreen-icon"),c=document.getElementById("mobile-fullscreen-modal");document.getElementById("fullscreen-iframe");const x=document.getElementById("fullscreen-tap-overlay"),I=document.getElementById("tap-to-exit-hint"),j=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);d&&a&&(d.addEventListener("load",()=>{setTimeout(()=>{a.style.opacity="0",a.style.transition="opacity 0.8s ease-out",setTimeout(()=>{a.style.display="none"},800)},500)}),setTimeout(()=>{a&&a.style.opacity!=="0"&&(a.style.opacity="0",a.style.transition="opacity 0.8s ease-out",setTimeout(()=>{a&&(a.style.display="none")},800))},3e3));if(C&&d){let s=function(){t=!!document.fullscreenElement||!!document.webkitFullscreenElement||!!document.mozFullScreenElement||!!document.msFullscreenElement,L&&b&&(t?(L.classList.add("hidden"),b.classList.remove("hidden")):(L.classList.remove("hidden"),b.classList.add("hidden")))},t=!1;if(C.addEventListener("click",()=>{if(j&&c){c.style.display="flex",document.body.classList.add("modal-open"),I&&(I.style.opacity="1",setTimeout(()=>{I.style.opacity="0"},3e3));return}if(t)if(document.exitFullscreen)document.exitFullscreen();else{const e=document;e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}else if(d.requestFullscreen)d.requestFullscreen();else{const e=d;e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}),x&&c){x.addEventListener("click",()=>{c.style.display="none",document.body.classList.remove("modal-open")});let e=0;x.addEventListener("touchend",n=>{const i=new Date().getTime(),r=i-e;r<500&&r>0&&(c.style.display="none",document.body.classList.remove("modal-open")),e=i})}document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("MSFullscreenChange",s)}w&&d&&document.addEventListener("fullscreenchange",()=>{document.fullscreenElement===d?w.style.display="none":w.style.display="block"});window.addEventListener("orientationchange",()=>{c&&c.style.display==="flex"&&setTimeout(()=>{window.scrollTo(0,0)},100)});const h=document.getElementById("preset-carousel"),O=document.getElementById("prev-preset"),q=document.getElementById("next-preset"),S=document.getElementById("current-preset-index"),g=document.querySelectorAll(".preset-slide"),u=g.length;let l=0;const T=document.getElementById("matrix-iframe"),A=document.getElementById("fullscreen-iframe");function m(){h&&(h.style.transform=`translateX(-${l*100}%)`,S&&(S.textContent=(l+1).toString()),R(l))}function R(s){const t=g[s];if(!t||!T)return;const e=t.getAttribute("data-preset-param");if(!e)return;const i=`/matrix/index.html?${e}`;T.src=i,A&&(A.src=i),g.forEach(v=>{const E=v.querySelector("button");E&&E.classList.remove("bg-green-800/70","border-green-500")});const r=t.querySelector("button");r&&r.classList.add("bg-green-800/70","border-green-500")}O&&O.addEventListener("click",()=>{l=(l-1+u)%u,m()});q&&q.addEventListener("click",()=>{l=(l+1)%u,m()});g.forEach((s,t)=>{const e=s.querySelector("button");e&&e.addEventListener("click",()=>{l=t,m()})});let B=0,k=0;h&&(h.addEventListener("touchstart",s=>{B=s.changedTouches[0].screenX},{passive:!0}),h.addEventListener("touchend",s=>{k=s.changedTouches[0].screenX,z()},{passive:!0}));function z(){k<B-50?(l=(l+1)%u,m()):k>B+50&&(l=(l-1+u)%u,m())}window.addEventListener("DOMContentLoaded",()=>{m()});const F=document.getElementById("control-panel-fullscreen-button"),M=document.getElementById("fullscreen-button");F&&M&&F.addEventListener("click",()=>{M.click()});const H=document.getElementById("toggle-terminal-help"),p=document.getElementById("terminal-help-modal"),$=document.getElementById("close-terminal-help");H&&p&&$&&(H.addEventListener("click",()=>{p.classList.remove("hidden"),document.body.style.overflow="hidden"}),$.addEventListener("click",()=>{p.classList.add("hidden"),document.body.style.overflow=""}),document.addEventListener("keydown",s=>{s.key==="Escape"&&!p.classList.contains("hidden")&&(p.classList.add("hidden"),document.body.style.overflow="")}));const P=document.getElementById("toggle-terminal"),y=document.getElementById("terminal-container");P&&y&&P.addEventListener("click",()=>{const s=y.classList.contains("hidden"),t=document.getElementById("terminal-overlay");if(s){y.classList.remove("hidden"),t&&t.classList.remove("hidden");const e=document.getElementById("terminal-input");e&&e.focus()}else y.classList.add("hidden"),t&&t.classList.add("hidden")});document.addEventListener("matrix-command",s=>{const{command:t,params:e}=s.detail;if(t==="apply"){const n=document.getElementById("matrix-iframe");if(n){if(e==="reset=true"){const r=n.src.split("?")[0];n.src=r;return}const i=n.src.split("?")[0];n.src=`${i}?${e}`}}});const f=document.querySelectorAll(".faq-item"),o=document.getElementById("toggle-all-faq");function D(s,t){const e=s.querySelector(".faq-question"),n=s.querySelector(".faq-answer"),i=s.querySelector(".faq-icon");if(!e||!n||!i)return;(t!==void 0?!t:e.getAttribute("aria-expanded")==="true")?(e.setAttribute("aria-expanded","false"),n.classList.add("hidden"),i.classList.remove("rotate-180")):(e.setAttribute("aria-expanded","true"),n.classList.remove("hidden"),i.classList.add("rotate-180"))}f.forEach(s=>{const t=s.querySelector(".faq-question");t&&t.addEventListener("click",()=>{D(s),U()})});o&&o.addEventListener("click",()=>{const t=o.getAttribute("data-state")==="expanded";f.forEach(e=>{D(e,t)}),t?(o.innerHTML=`
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5" />
          </svg>
          Expand All
        `,o.setAttribute("data-state","collapsed")):(o.innerHTML=`
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5" />
          </svg>
          Fold All
        `,o.setAttribute("data-state","expanded"))});function U(){if(!o)return;const s=Array.from(f).every(e=>{const n=e.querySelector(".faq-question");return n&&n.getAttribute("aria-expanded")==="true"}),t=Array.from(f).every(e=>{const n=e.querySelector(".faq-question");return n&&n.getAttribute("aria-expanded")==="false"});s?(o.setAttribute("data-state","expanded"),o.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5" />
        </svg>
        Fold All
      `):t&&(o.setAttribute("data-state","collapsed"),o.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5" />
        </svg>
        Expand All
      `)}window.addEventListener("DOMContentLoaded",()=>{f.forEach(s=>{const t=s.querySelector(".faq-question"),e=s.querySelector(".faq-answer"),n=s.querySelector(".faq-icon");t&&e&&n&&(t.setAttribute("aria-expanded","true"),e.classList.remove("hidden"),n.classList.add("rotate-180"))}),o&&o.setAttribute("data-state","expanded")});class N{constructor(){this.commandHistory=[],this.historyIndex=-1,this.currentParams={},this.input=document.getElementById("terminal-input"),this.output=document.getElementById("terminal-output"),this.panel=document.querySelector(".terminal-panel"),this.setupEventListeners(),this.setupMobileDismiss()}setupEventListeners(){this.input.addEventListener("keydown",e=>{e.key==="Enter"?this.handleCommand():e.key==="ArrowUp"?(e.preventDefault(),this.navigateHistory("up")):e.key==="ArrowDown"?(e.preventDefault(),this.navigateHistory("down")):e.key==="Tab"&&(e.preventDefault(),this.handleTabCompletion())});const t=document.createElement("button");t.innerHTML="âŽ",t.className="px-3 py-1 text-green-400 hover:text-green-300 focus:outline-none",t.addEventListener("click",()=>this.handleCommand()),this.input.parentElement?.appendChild(t)}setupMobileDismiss(){document.addEventListener("click",t=>{const e=document.getElementById("terminal-container");if(!(!e||e.classList.contains("hidden"))&&this.panel&&!this.panel.contains(t.target)&&!t.target.closest("#toggle-terminal")){e.classList.add("hidden");const n=document.getElementById("terminal-overlay");n&&n.classList.add("hidden")}}),this.panel.addEventListener("click",t=>{t.stopPropagation()})}handleCommand(){const t=this.input.value.trim();t&&(this.commandHistory.push(t),this.historyIndex=this.commandHistory.length,this.printOutput(`$ ${t}`,"command"),this.processCommand(t),this.input.value="")}processCommand(t){const e=t.trim().toLowerCase().split(" ");if(e[0]==="help"){this.showHelp(e[1]);return}if(e[0]==="clear"){this.clearTerminal();return}if(e[0]==="exit"){this.closeTerminal();return}if(e[0]==="status"){this.showCurrentParams();return}if(e[0]==="reset"){this.resetParams();return}if(e[0]==="fullscreen"){this.toggleFullscreen();return}if(e.length>=2){const n=e[0],i=e.slice(1).join(" ");this.printOutput(`Setting parameter: ${n} to ${i}`,"info"),this.currentParams[n]=i,this.applyParams();return}this.printOutput(`Invalid command format. Use "<parameter> <value>" or type 'help'.`,"error")}applyParams(){const t=Object.entries(this.currentParams).map(([n,i])=>{const r={animationspeed:"animationSpeed",fallspeed:"fallSpeed",cyclespeed:"cycleSpeed",forwardspeed:"forwardSpeed",bloomsize:"bloomSize",bloomstrength:"bloomStrength",dithermagnitude:"ditherMagnitude",backgroundcolor:"backgroundColor",cursorcolor:"cursorColor",glintcolor:"glintColor",cursorintensity:"cursorIntensity",glintintensity:"glintIntensity",glyphflip:"glyphFlip",glyphrotation:"glyphRotation",numcolumns:"numColumns",skipintro:"skipIntro",stripecolors:"stripeColors",suppresswarnings:"suppressWarnings",raindropcountmultiplier:"raindropCountMultiplier",raindropdensity:"raindropDensity",raindropspeed:"raindropSpeed",raindropcountmult:"raindropCountMultiplier",raindropcount:"raindropCountMultiplier",raindrop:"raindropCountMultiplier"},v=n.toLowerCase();return`${r[v]||n}=${i}`}).join("&");this.printOutput(`Applying parameters: ${t}`,"info");const e=new CustomEvent("matrix-command",{detail:{command:"apply",params:t}});document.dispatchEvent(e),this.printOutput(`Updated: ${this.currentParams[Object.keys(this.currentParams).pop()||""]}`,"success")}printOutput(t,e="info"){const n=document.createElement("div");n.className=`terminal-line ${e}`,n.textContent=t,this.output.appendChild(n),this.output.scrollTop=this.output.scrollHeight}clearTerminal(){for(;this.output.firstChild;)this.output.removeChild(this.output.firstChild)}closeTerminal(){const t=document.getElementById("terminal-modal");t&&t.classList.add("hidden");const e=document.getElementById("terminal-help-modal");e&&!e.classList.contains("hidden")&&(e.classList.add("hidden"),document.body.style.overflow="");const n=document.getElementById("terminal-container");n&&n.classList.add("hidden");const i=document.getElementById("terminal-overlay");i&&i.classList.add("hidden")}navigateHistory(t){t==="up"&&this.historyIndex>0?(this.historyIndex--,this.input.value=this.commandHistory[this.historyIndex]):t==="down"&&this.historyIndex<this.commandHistory.length-1?(this.historyIndex++,this.input.value=this.commandHistory[this.historyIndex]):t==="down"&&(this.historyIndex=this.commandHistory.length,this.input.value="")}handleTabCompletion(){}showHelp(t){const e=document.getElementById("terminal-help-modal");if(e){e.classList.remove("hidden"),document.body.style.overflow="hidden";const n=document.getElementById("close-terminal-help");n&&n.addEventListener("click",()=>{e.classList.add("hidden"),document.body.style.overflow=""});const i=r=>{r.key==="Escape"&&(e.classList.add("hidden"),document.body.style.overflow="",document.removeEventListener("keydown",i))};document.addEventListener("keydown",i),t&&setTimeout(()=>{const r=document.querySelector(`[data-category="${t}"]`);r&&r.scrollIntoView({behavior:"smooth"})},100),this.printOutput("Opened help documentation","success");return}if(t){const n=commands[t];n?(this.printOutput(`Help for ${t}:`,"info"),this.printOutput(`${n.syntax}`,"info"),n.options.forEach(i=>{this.printOutput(`  ${i.name}`,"param"),this.printOutput(`    ${i.desc}`,"info")})):this.printOutput(`No help available for '${t}'. Type 'help' to see all categories.`,"error")}else this.printOutput("=== AVAILABLE COMMANDS ===","success"),this.printOutput("<param> <value>       Set and apply a parameter","info"),this.printOutput("status                Show current parameters","info"),this.printOutput("reset                 Remove all parameters","info"),this.printOutput("fullscreen            Toggle fullscreen mode","info"),this.printOutput("clear                 Clear terminal","info"),this.printOutput("exit                  Close terminal","info"),this.printOutput("","info"),this.printOutput("=== PARAMETER CATEGORIES ===","success"),Object.keys(commands).forEach(n=>{this.printOutput(`  ${n}`,"param")}),this.printOutput("","info"),this.printOutput('Type "help <category>" for details on parameters.',"info"),this.printOutput("Example: version nightmare","info")}showCurrentParams(){if(Object.keys(this.currentParams).length===0){this.printOutput("No parameters set","info");return}this.printOutput("Current parameters:","info"),Object.entries(this.currentParams).forEach(([t,e])=>{this.printOutput(`${t} ${e}`,"param")})}resetParams(){this.currentParams={},this.printOutput("All parameters have been reset","success");const t=new CustomEvent("matrix-command",{detail:{command:"apply",params:"reset=true"}});document.dispatchEvent(t)}toggleFullscreen(){const t=document.getElementById("fullscreen-button");t?(t.click(),this.printOutput("Toggling fullscreen mode","success")):this.printOutput("Fullscreen button not found","error")}}window.addEventListener("DOMContentLoaded",()=>{new N});
